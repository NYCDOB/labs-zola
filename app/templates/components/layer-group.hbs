{{#if isReady}}
  {{#map.source
    sourceId=config.id
    options=sourceOptions as |source|}}
    {{#each config.layers as |layerConfig|}}
      {{log layerConfig.layer.paint}} 
      {{source.layer
        layer=layerConfig.layer
        didUpdateLayers=didUpdateLayers}}
    {{/each}}
  {{/map.source}}
{{/if}}

{{layer-menu-item
  title=config.title
  config=group
  visible=visible
  click=(action 'toggleVisibility')}}

{{yield 
  (hash 
    timeline-control=
      (component 'layer-control-timeline' layer=
        (hash 
          visible=visible
        )
        qps=qps
      )

    multi-select-control=
      (component 'layer-multi-select-control' layer=
        (hash 
          visible=visible
        )
        qps=qps
      )
    visible=visible
    updateSql=(action 'updateSql')
    isPending=configWithTemplate.isPending
    toggleVisibility=(action 'toggleVisibility')
    updatePaintFor=(action 'updatePaintFor')
  )
}}
